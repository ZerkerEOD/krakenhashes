<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Distributed password cracking system for security professionals"><meta name=author content=ZerkerEOD><link href=https://zerkereod.github.io/krakenhashes/0.15.19/admin-guide/system-setup/ssl-tls/ rel=canonical><link href=../configuration/ rel=prev><link href=../email/ rel=next><link rel=icon href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.19"><title>SSL/TLS Setup - KrakenHashes Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#ssltls-setup-guide-for-krakenhashes class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="KrakenHashes Documentation" class="md-header__button md-logo" aria-label="KrakenHashes Documentation" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KrakenHashes Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> SSL/TLS Setup </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=red data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ZerkerEOD/krakenhashes title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ZerkerEOD/krakenhashes </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../user-guide/ class=md-tabs__link> User Guide </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> Admin Guide </a> </li> <li class=md-tabs__item> <a href=../../../agent-guide/ class=md-tabs__link> Agent Guide </a> </li> <li class=md-tabs__item> <a href=../../../deployment/ class=md-tabs__link> Deployment </a> </li> <li class=md-tabs__item> <a href=../../../developer/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../../reference/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../../troubleshooting/potfile-issues/ class=md-tabs__link> Troubleshooting </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="KrakenHashes Documentation" class="md-nav__button md-logo" aria-label="KrakenHashes Documentation" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> KrakenHashes Documentation </label> <div class=md-nav__source> <a href=https://github.com/ZerkerEOD/krakenhashes title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ZerkerEOD/krakenhashes </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../user-guide/ class=md-nav__link> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> Admin Guide </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Admin Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex> <span class=md-ellipsis> System Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> System Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> SSL/TLS Setup </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> SSL/TLS Setup </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#downloading-the-ca-certificate class=md-nav__link> <span class=md-ellipsis> Downloading the CA Certificate </span> </a> </li> <li class=md-nav__item> <a href=#installation-instructions-by-platform class=md-nav__link> <span class=md-ellipsis> Installation Instructions by Platform </span> </a> <nav class=md-nav aria-label="Installation Instructions by Platform"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux-systems class=md-nav__link> <span class=md-ellipsis> Linux Systems </span> </a> </li> <li class=md-nav__item> <a href=#windows class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> <li class=md-nav__item> <a href=#macos class=md-nav__link> <span class=md-ellipsis> macOS </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#verification class=md-nav__link> <span class=md-ellipsis> Verification </span> </a> </li> <li class=md-nav__item> <a href=#certificate-details class=md-nav__link> <span class=md-ellipsis> Certificate Details </span> </a> </li> <li class=md-nav__item> <a href=#environment-variables class=md-nav__link> <span class=md-ellipsis> Environment Variables </span> </a> </li> <li class=md-nav__item> <a href=#security-considerations class=md-nav__link> <span class=md-ellipsis> Security Considerations </span> </a> </li> <li class=md-nav__item> <a href=#regenerating-certificates class=md-nav__link> <span class=md-ellipsis> Regenerating Certificates </span> </a> </li> <li class=md-nav__item> <a href=#certificate-modes class=md-nav__link> <span class=md-ellipsis> Certificate Modes </span> </a> </li> <li class=md-nav__item> <a href=#certbot-mode-lets-encrypt class=md-nav__link> <span class=md-ellipsis> Certbot Mode (Let's Encrypt) </span> </a> <nav class=md-nav aria-label="Certbot Mode (Let's Encrypt)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#step-1-create-cloudflare-api-token class=md-nav__link> <span class=md-ellipsis> Step 1: Create Cloudflare API Token </span> </a> </li> <li class=md-nav__item> <a href=#step-2-dns-configuration class=md-nav__link> <span class=md-ellipsis> Step 2: DNS Configuration </span> </a> </li> <li class=md-nav__item> <a href=#step-3-configure-krakenhashes class=md-nav__link> <span class=md-ellipsis> Step 3: Configure KrakenHashes </span> </a> </li> <li class=md-nav__item> <a href=#step-4-initial-setup-with-staging class=md-nav__link> <span class=md-ellipsis> Step 4: Initial Setup with Staging </span> </a> </li> <li class=md-nav__item> <a href=#step-5-verify-staging-certificates class=md-nav__link> <span class=md-ellipsis> Step 5: Verify Staging Certificates </span> </a> </li> <li class=md-nav__item> <a href=#step-6-switch-to-production class=md-nav__link> <span class=md-ellipsis> Step 6: Switch to Production </span> </a> </li> <li class=md-nav__item> <a href=#certificate-renewal class=md-nav__link> <span class=md-ellipsis> Certificate Renewal </span> </a> </li> <li class=md-nav__item> <a href=#certbot-troubleshooting class=md-nav__link> <span class=md-ellipsis> Certbot Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=#additional-domains class=md-nav__link> <span class=md-ellipsis> Additional Domains </span> </a> </li> <li class=md-nav__item> <a href=#migration-from-self-signed class=md-nav__link> <span class=md-ellipsis> Migration from Self-Signed </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#common-issues-and-solutions class=md-nav__link> <span class=md-ellipsis> Common Issues and Solutions </span> </a> </li> <li class=md-nav__item> <a href=#diagnostic-commands class=md-nav__link> <span class=md-ellipsis> Diagnostic Commands </span> </a> </li> <li class=md-nav__item> <a href=#removing-old-certificates class=md-nav__link> <span class=md-ellipsis> Removing Old Certificates </span> </a> </li> <li class=md-nav__item> <a href=#getting-help class=md-nav__link> <span class=md-ellipsis> Getting Help </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../email/ class=md-nav__link> <span class=md-ellipsis> Email Configuration </span> </a> </li> <li class=md-nav__item> <a href=../authentication/ class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex> <span class=md-ellipsis> Resource Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Resource Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../resource-management/binaries/ class=md-nav__link> <span class=md-ellipsis> Managing Binaries </span> </a> </li> <li class=md-nav__item> <a href=../../resource-management/wordlists/ class=md-nav__link> <span class=md-ellipsis> Wordlist Management </span> </a> </li> <li class=md-nav__item> <a href=../../resource-management/rules/ class=md-nav__link> <span class=md-ellipsis> Rule Management </span> </a> </li> <li class=md-nav__item> <a href=../../resource-management/storage/ class=md-nav__link> <span class=md-ellipsis> Storage Architecture </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex> <span class=md-ellipsis> Operations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/users/ class=md-nav__link> <span class=md-ellipsis> User Management </span> </a> </li> <li class=md-nav__item> <a href=../../operations/clients/ class=md-nav__link> <span class=md-ellipsis> Client Management </span> </a> </li> <li class=md-nav__item> <a href=../../operations/agents/ class=md-nav__link> <span class=md-ellipsis> Agent Management </span> </a> </li> <li class=md-nav__item> <a href=../../operations/scheduling/ class=md-nav__link> <span class=md-ellipsis> Agent Scheduling </span> </a> </li> <li class=md-nav__item> <a href=../../operations/job-settings/ class=md-nav__link> <span class=md-ellipsis> Job Settings </span> </a> </li> <li class=md-nav__item> <a href=../../operations/potfile/ class=md-nav__link> <span class=md-ellipsis> Potfile Management </span> </a> </li> <li class=md-nav__item> <a href=../../operations/monitoring/ class=md-nav__link> <span class=md-ellipsis> System Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../operations/backup/ class=md-nav__link> <span class=md-ellipsis> Backup Procedures </span> </a> </li> <li class=md-nav__item> <a href=../../operations/data-retention/ class=md-nav__link> <span class=md-ellipsis> Data Retention </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advanced/presets/ class=md-nav__link> <span class=md-ellipsis> Preset Jobs & Workflows </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/job-priority/ class=md-nav__link> <span class=md-ellipsis> Job Priority </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/chunking/ class=md-nav__link> <span class=md-ellipsis> Job Chunking System </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/performance/ class=md-nav__link> <span class=md-ellipsis> Performance Tuning </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../agent-guide/ class=md-nav__link> <span class=md-ellipsis> Agent Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../deployment/ class=md-nav__link> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../developer/ class=md-nav__link> <span class=md-ellipsis> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../reference/ class=md-nav__link> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../troubleshooting/potfile-issues/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=ssltls-setup-guide-for-krakenhashes>SSL/TLS Setup Guide for KrakenHashes<a class=headerlink href=#ssltls-setup-guide-for-krakenhashes title="Permanent link">&para;</a></h1> <p>This guide explains how to set up and trust the self-signed SSL certificates used by KrakenHashes on various platforms.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>KrakenHashes uses self-signed certificates by default to secure communications between components. When you first access the web interface, your browser will warn you about the untrusted certificate. This is expected behavior for self-signed certificates.</p> <p>To avoid these warnings, you need to install the KrakenHashes Certificate Authority (CA) certificate as a trusted root certificate on your system.</p> <h2 id=downloading-the-ca-certificate>Downloading the CA Certificate<a class=headerlink href=#downloading-the-ca-certificate title="Permanent link">&para;</a></h2> <p>The CA certificate can be downloaded from: - <strong>HTTP endpoint</strong>: <code>http://your-server:1337/ca.crt</code> - <strong>Via the web interface</strong>: When you see the certificate warning, there's usually an option to download the CA certificate</p> <p>Save the file as <code>krakenhashes-ca.crt</code> for the following instructions.</p> <h2 id=installation-instructions-by-platform>Installation Instructions by Platform<a class=headerlink href=#installation-instructions-by-platform title="Permanent link">&para;</a></h2> <h3 id=linux-systems>Linux Systems<a class=headerlink href=#linux-systems title="Permanent link">&para;</a></h3> <h4 id=debianubuntu>Debian/Ubuntu<a class=headerlink href=#debianubuntu title="Permanent link">&para;</a></h4> <ol> <li> <p>Copy the CA certificate to the system certificate directory: <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>sudo<span class=w> </span>cp<span class=w> </span>krakenhashes-ca.crt<span class=w> </span>/usr/local/share/ca-certificates/
</span></code></pre></div></p> </li> <li> <p>Update the certificate store: <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>sudo<span class=w> </span>update-ca-certificates
</span></code></pre></div></p> </li> <li> <p>You should see output indicating the certificate was added: <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>Updating certificates in /etc/ssl/certs...
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>1 added, 0 removed; done.
</span></code></pre></div></p> </li> </ol> <h4 id=fedorarhelcentosrocky-linux>Fedora/RHEL/CentOS/Rocky Linux<a class=headerlink href=#fedorarhelcentosrocky-linux title="Permanent link">&para;</a></h4> <ol> <li> <p>Copy the CA certificate to the trust anchors directory: <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>sudo<span class=w> </span>cp<span class=w> </span>krakenhashes-ca.crt<span class=w> </span>/etc/pki/ca-trust/source/anchors/
</span></code></pre></div></p> </li> <li> <p>Update the trust store: <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>sudo<span class=w> </span>update-ca-trust
</span></code></pre></div></p> </li> </ol> <h4 id=arch-linux>Arch Linux<a class=headerlink href=#arch-linux title="Permanent link">&para;</a></h4> <p><strong>Using trust anchor command (Recommended):</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># This is the official Arch way - it handles everything automatically</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>sudo<span class=w> </span>trust<span class=w> </span>anchor<span class=w> </span>--store<span class=w> </span>krakenhashes-ca.crt
</span></code></pre></div></p> <p>Note: The <code>trust anchor --store</code> command automatically: - Places the certificate in <code>/etc/ca-certificates/trust-source/anchors/</code> - Updates the trust database with <code>update-ca-trust</code> - Handles p11-kit integration properly</p> <h4 id=additional-step-for-chromechromium-on-linux>Additional Step for Chrome/Chromium on Linux<a class=headerlink href=#additional-step-for-chromechromium-on-linux title="Permanent link">&para;</a></h4> <p>Chrome and Chromium browsers maintain their own certificate store on Linux. After installing the system certificate, you also need to:</p> <ol> <li> <p>Install the certificate in the NSS database: <div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>certutil<span class=w> </span>-d<span class=w> </span>sql:<span class=nv>$HOME</span>/.pki/nssdb<span class=w> </span>-A<span class=w> </span>-t<span class=w> </span><span class=s2>&quot;CP,CP,&quot;</span><span class=w> </span>-n<span class=w> </span><span class=s2>&quot;KrakenHashes Root CA&quot;</span><span class=w> </span>-i<span class=w> </span>krakenhashes-ca.crt
</span></code></pre></div></p> </li> <li> <p>Restart Chrome/Chromium for the changes to take effect.</p> </li> </ol> <p>To verify the certificate was installed: <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>certutil<span class=w> </span>-d<span class=w> </span>sql:<span class=nv>$HOME</span>/.pki/nssdb<span class=w> </span>-L
</span></code></pre></div></p> <p>To remove the certificate later if needed: <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>certutil<span class=w> </span>-d<span class=w> </span>sql:<span class=nv>$HOME</span>/.pki/nssdb<span class=w> </span>-D<span class=w> </span>-n<span class=w> </span><span class=s2>&quot;KrakenHashes Root CA&quot;</span>
</span></code></pre></div></p> <h3 id=windows>Windows<a class=headerlink href=#windows title="Permanent link">&para;</a></h3> <h4 id=using-certificate-manager-gui>Using Certificate Manager (GUI)<a class=headerlink href=#using-certificate-manager-gui title="Permanent link">&para;</a></h4> <ol> <li>Press <code>Win + R</code>, type <code>certmgr.msc</code>, and press Enter</li> <li>Navigate to "Trusted Root Certification Authorities" &gt; "Certificates"</li> <li>Right-click on "Certificates" and select "All Tasks" &gt; "Import..."</li> <li>Follow the Certificate Import Wizard:</li> <li>Click "Next"</li> <li>Browse and select the <code>krakenhashes-ca.crt</code> file</li> <li>Click "Next"</li> <li>Ensure "Place all certificates in the following store" is selected with "Trusted Root Certification Authorities"</li> <li>Click "Next" and then "Finish"</li> <li>When prompted with a security warning, click "Yes" to install the certificate</li> </ol> <h4 id=using-powershell-administrator>Using PowerShell (Administrator)<a class=headerlink href=#using-powershell-administrator title="Permanent link">&para;</a></h4> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c># Import the certificate to the Trusted Root store</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=nb>Import-Certificate</span> <span class=n>-FilePath</span> <span class=s2>&quot;C:\path\to\krakenhashes-ca.crt&quot;</span> <span class=n>-CertStoreLocation</span> <span class=n>Cert</span><span class=p>:\</span><span class=n>LocalMachine</span><span class=p>\</span><span class=n>Root</span>
</span></code></pre></div> <h4 id=using-command-prompt-administrator>Using Command Prompt (Administrator)<a class=headerlink href=#using-command-prompt-administrator title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>certutil -addstore &quot;Root&quot; &quot;C:\path\to\krakenhashes-ca.crt&quot;
</span></code></pre></div> <h3 id=macos>macOS<a class=headerlink href=#macos title="Permanent link">&para;</a></h3> <h4 id=using-keychain-access-gui>Using Keychain Access (GUI)<a class=headerlink href=#using-keychain-access-gui title="Permanent link">&para;</a></h4> <ol> <li>Double-click the <code>krakenhashes-ca.crt</code> file</li> <li>Keychain Access will open</li> <li>Select "System" keychain (you may need to authenticate)</li> <li>The certificate will be added but marked as untrusted</li> <li>Double-click on the "KrakenHashes Root CA" certificate</li> <li>Expand the "Trust" section</li> <li>Change "When using this certificate" to "Always Trust"</li> <li>Close the window and authenticate to save changes</li> </ol> <h4 id=using-command-line>Using Command Line<a class=headerlink href=#using-command-line title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Add certificate to system keychain</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>sudo<span class=w> </span>security<span class=w> </span>add-trusted-cert<span class=w> </span>-d<span class=w> </span>-r<span class=w> </span>trustRoot<span class=w> </span>-k<span class=w> </span>/Library/Keychains/System.keychain<span class=w> </span>krakenhashes-ca.crt
</span></code></pre></div> <h2 id=verification>Verification<a class=headerlink href=#verification title="Permanent link">&para;</a></h2> <p>After installing the certificate, you can verify it's working:</p> <ol> <li><strong>Browser Test</strong>: Navigate to <code>https://your-server:31337</code> - you should no longer see certificate warnings</li> <li><strong>Command Line Test</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>curl<span class=w> </span>https://your-server:31337/health
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=c1># Should work without certificate errors</span>
</span></code></pre></div></li> </ol> <h2 id=certificate-details>Certificate Details<a class=headerlink href=#certificate-details title="Permanent link">&para;</a></h2> <p>The self-signed certificates generated by KrakenHashes include:</p> <ul> <li><strong>CA Certificate</strong>: Valid for 10 years (3650 days)</li> <li><strong>Server Certificate</strong>: Valid for 1 year (365 days)</li> <li><strong>Key Size</strong>: 4096-bit RSA (configurable)</li> <li><strong>Extensions</strong>: </li> <li>SubjectKeyIdentifier and AuthorityKeyIdentifier for proper chain validation</li> <li>BasicConstraints properly set (CA:TRUE for CA, CA:FALSE for server)</li> <li>Appropriate KeyUsage and ExtendedKeyUsage flags</li> </ul> <h2 id=environment-variables>Environment Variables<a class=headerlink href=#environment-variables title="Permanent link">&para;</a></h2> <p>You can customize certificate generation with these environment variables:</p> <ul> <li><code>KH_ADDITIONAL_DNS_NAMES</code>: Comma-separated additional DNS names (e.g., "krakenhashes.local,kraken.internal")</li> <li><code>KH_ADDITIONAL_IP_ADDRESSES</code>: Comma-separated additional IP addresses (e.g., "192.168.1.100,10.0.0.50")</li> <li><code>KH_CERT_KEY_SIZE</code>: RSA key size (2048 or 4096, default: 4096)</li> <li><code>KH_CERT_VALIDITY_DAYS</code>: Server certificate validity in days (default: 365)</li> <li><code>KH_CA_VALIDITY_DAYS</code>: CA certificate validity in days (default: 3650)</li> </ul> <h2 id=security-considerations>Security Considerations<a class=headerlink href=#security-considerations title="Permanent link">&para;</a></h2> <ol> <li><strong>Self-signed certificates</strong> are suitable for:</li> <li>Development environments</li> <li>Internal networks</li> <li>Testing and staging</li> <li> <p>Environments where you control all clients</p> </li> <li> <p><strong>For production use</strong>, consider:</p> </li> <li>Using certificates from a trusted CA (Let's Encrypt, etc.)</li> <li>Implementing proper certificate rotation</li> <li> <p>Using the <code>certbot</code> mode if you have a public domain</p> </li> <li> <p><strong>Certificate Storage</strong>:</p> </li> <li>Private keys are stored with 0600 permissions</li> <li>Certificates are stored in the configured certs directory</li> <li>Default location: <code>~/.krakenhashes/certs/</code> or <code>/etc/krakenhashes/certs/</code> in Docker</li> </ol> <h2 id=regenerating-certificates>Regenerating Certificates<a class=headerlink href=#regenerating-certificates title="Permanent link">&para;</a></h2> <p>If you need to regenerate certificates (e.g., to add new SANs):</p> <ol> <li>Stop the KrakenHashes backend</li> <li>Delete the existing certificates: <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>rm<span class=w> </span>-rf<span class=w> </span>~/.krakenhashes/certs/*
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=c1># Or your configured certs directory</span>
</span></code></pre></div></li> <li>Start the backend - new certificates will be generated automatically</li> <li>Reinstall the new CA certificate on client systems</li> </ol> <h2 id=certificate-modes>Certificate Modes<a class=headerlink href=#certificate-modes title="Permanent link">&para;</a></h2> <p>KrakenHashes supports three TLS modes:</p> <ol> <li><strong>self-signed</strong> (default): Automatically generates and manages certificates</li> <li><strong>provided</strong>: Use your own certificates (set paths via environment variables)</li> <li><strong>certbot</strong>: Integration with Let's Encrypt for public domains</li> </ol> <p>To change modes, set the <code>KH_TLS_MODE</code> environment variable.</p> <h2 id=certbot-mode-lets-encrypt>Certbot Mode (Let's Encrypt)<a class=headerlink href=#certbot-mode-lets-encrypt title="Permanent link">&para;</a></h2> <p>This mode allows you to use Let's Encrypt certificates via Certbot with Cloudflare DNS-01 challenge. This is ideal for internal applications that aren't publicly accessible.</p> <h3 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h3> <ol> <li><strong>Domain Name</strong>: You need to own a domain (e.g., <code>zerkersec.io</code>)</li> <li><strong>Cloudflare Account</strong>: Your domain must be managed by Cloudflare</li> <li><strong>API Token</strong>: Create a Cloudflare API token with proper permissions</li> </ol> <h3 id=step-1-create-cloudflare-api-token>Step 1: Create Cloudflare API Token<a class=headerlink href=#step-1-create-cloudflare-api-token title="Permanent link">&para;</a></h3> <ol> <li>Log in to your Cloudflare dashboard</li> <li>Go to <strong>My Profile</strong> → <strong>API Tokens</strong></li> <li>Click <strong>Create Token</strong></li> <li>Use the <strong>Custom token</strong> template with these permissions:</li> <li><strong>Zone</strong> → <strong>DNS</strong> → <strong>Edit</strong></li> <li><strong>Zone</strong> → <strong>Zone</strong> → <strong>Read</strong> (optional but recommended)</li> <li>Under <strong>Zone Resources</strong>, select:</li> <li><strong>Include</strong> → <strong>Specific zone</strong> → Your domain (e.g., <code>zerkersec.io</code>)</li> <li>Click <strong>Continue to summary</strong> and <strong>Create Token</strong></li> <li><strong>Save the token securely</strong> - you won't be able to see it again!</li> </ol> <h3 id=step-2-dns-configuration>Step 2: DNS Configuration<a class=headerlink href=#step-2-dns-configuration title="Permanent link">&para;</a></h3> <p>Create an A record for your subdomain:</p> <ol> <li>In Cloudflare dashboard, go to your domain</li> <li>Navigate to <strong>DNS</strong> → <strong>Records</strong></li> <li>Add a new A record:</li> <li><strong>Type</strong>: A</li> <li><strong>Name</strong>: <code>kraken</code> (or your chosen subdomain)</li> <li><strong>IPv4 address</strong>: Your internal IP (e.g., <code>10.0.0.100</code>)</li> <li><strong>Proxy status</strong>: DNS only (gray cloud)</li> <li><strong>TTL</strong>: Auto</li> </ol> <p><strong>Note</strong>: The IP address doesn't need to be publicly accessible. Certbot only needs to verify domain ownership via DNS TXT records.</p> <h3 id=step-3-configure-krakenhashes>Step 3: Configure KrakenHashes<a class=headerlink href=#step-3-configure-krakenhashes title="Permanent link">&para;</a></h3> <p>Edit your <code>.env</code> file:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1># Change TLS mode to certbot</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=nv>KH_TLS_MODE</span><span class=o>=</span>certbot
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=c1># Certbot Configuration</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=nv>KH_CERTBOT_DOMAIN</span><span class=o>=</span>kraken.zerkersec.io<span class=w>    </span><span class=c1># Your full domain</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=nv>KH_CERTBOT_EMAIL</span><span class=o>=</span>admin@zerkersec.io<span class=w>      </span><span class=c1># Your email for Let&#39;s Encrypt</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=nv>KH_CERTBOT_STAGING</span><span class=o>=</span><span class=nb>true</span><span class=w>                  </span><span class=c1># Start with staging for testing!</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=nv>KH_CERTBOT_AUTO_RENEW</span><span class=o>=</span><span class=nb>true</span><span class=w>               </span><span class=c1># Enable automatic renewal</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=c1># Cloudflare Configuration</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=nv>CLOUDFLARE_API_TOKEN</span><span class=o>=</span>your-token-here<span class=w>     </span><span class=c1># The token from Step 1</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=c1># Update frontend URLs to use your domain</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=nv>REACT_APP_API_URL</span><span class=o>=</span>https://kraken.zerkersec.io:31337
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a><span class=nv>REACT_APP_WS_URL</span><span class=o>=</span>wss://kraken.zerkersec.io:31337
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a>
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a><span class=c1># Update CORS to allow your domain</span>
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a><span class=nv>CORS_ALLOWED_ORIGIN</span><span class=o>=</span>https://kraken.zerkersec.io
</span></code></pre></div> <h3 id=step-4-initial-setup-with-staging>Step 4: Initial Setup with Staging<a class=headerlink href=#step-4-initial-setup-with-staging title="Permanent link">&para;</a></h3> <p><strong>Important</strong>: Always test with Let's Encrypt staging environment first to avoid rate limits!</p> <ol> <li> <p>Stop existing containers: <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>docker-compose<span class=w> </span>down
</span></code></pre></div></p> </li> <li> <p>Start with certbot mode: <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>docker-compose<span class=w> </span>up<span class=w> </span>-d
</span></code></pre></div></p> </li> <li> <p>Monitor the logs: <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>docker-compose<span class=w> </span>logs<span class=w> </span>-f<span class=w> </span>krakenhashes
</span></code></pre></div></p> </li> <li> <p>Look for messages indicating successful certificate generation: <div class="language-text highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>Obtaining certificates for domain: kraken.zerkersec.io
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>Successfully obtained certificates
</span></code></pre></div></p> </li> </ol> <h3 id=step-5-verify-staging-certificates>Step 5: Verify Staging Certificates<a class=headerlink href=#step-5-verify-staging-certificates title="Permanent link">&para;</a></h3> <ol> <li> <p>Check certificate files: <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>ls<span class=w> </span>-la<span class=w> </span>kh-backend/config/certs/live/kraken.zerkersec.io/
</span></code></pre></div></p> </li> <li> <p>You should see:</p> </li> <li><code>fullchain.pem</code> - Certificate chain</li> <li><code>privkey.pem</code> - Private key</li> <li><code>chain.pem</code> - Intermediate certificates</li> <li> <p><code>cert.pem</code> - Domain certificate</p> </li> <li> <p>Test the application (you'll get a browser warning for staging certificates)</p> </li> </ol> <h3 id=step-6-switch-to-production>Step 6: Switch to Production<a class=headerlink href=#step-6-switch-to-production title="Permanent link">&para;</a></h3> <p>Once staging certificates work:</p> <ol> <li> <p>Update <code>.env</code>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=nv>KH_CERTBOT_STAGING</span><span class=o>=</span><span class=nb>false</span>
</span></code></pre></div></p> </li> <li> <p>Remove staging certificates: <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>rm<span class=w> </span>-rf<span class=w> </span>kh-backend/config/certs/live/*
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>rm<span class=w> </span>-rf<span class=w> </span>kh-backend/config/certs/archive/*
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>rm<span class=w> </span>-rf<span class=w> </span>kh-backend/config/certs/renewal/*
</span></code></pre></div></p> </li> <li> <p>Restart to get production certificates: <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>docker-compose<span class=w> </span>down
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>docker-compose<span class=w> </span>up<span class=w> </span>-d
</span></code></pre></div></p> </li> </ol> <h3 id=certificate-renewal>Certificate Renewal<a class=headerlink href=#certificate-renewal title="Permanent link">&para;</a></h3> <p>Certificates are automatically renewed:</p> <ul> <li>Renewal checks run twice daily (3 AM and 3 PM)</li> <li>Certificates renew when less than 30 days remain</li> <li>Services reload automatically after renewal</li> </ul> <p><strong>Manual Renewal</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>krakenhashes<span class=w> </span>/usr/local/bin/certbot-renew.sh
</span></code></pre></div></p> <p><strong>Monitor Renewal</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>krakenhashes<span class=w> </span>tail<span class=w> </span>-f<span class=w> </span>/var/log/krakenhashes/certbot-renew.log
</span></code></pre></div></p> <h3 id=certbot-troubleshooting>Certbot Troubleshooting<a class=headerlink href=#certbot-troubleshooting title="Permanent link">&para;</a></h3> <h4 id=common-issues>Common Issues<a class=headerlink href=#common-issues title="Permanent link">&para;</a></h4> <ol> <li><strong>"CLOUDFLARE_API_TOKEN environment variable is required"</strong></li> <li>Ensure the token is set in your <code>.env</code> file</li> <li> <p>Token must have DNS:Edit permissions</p> </li> <li> <p><strong>"Failed to obtain certificates"</strong></p> </li> <li>Check Cloudflare API token permissions</li> <li>Verify domain ownership</li> <li> <p>Check certbot logs: <code>docker exec krakenhashes cat /etc/krakenhashes/certs/logs/letsencrypt.log</code></p> </li> <li> <p><strong>Browser still shows certificate warnings</strong></p> </li> <li>Ensure you switched from staging to production</li> <li>Clear browser cache</li> <li> <p>Verify certificates: <code>docker exec krakenhashes openssl x509 -in /etc/krakenhashes/certs/live/kraken.zerkersec.io/cert.pem -text -noout</code></p> </li> <li> <p><strong>Rate Limits</strong></p> </li> <li>Let's Encrypt has rate limits (50 certificates per domain per week)</li> <li>Always test with staging first</li> <li>See: https://letsencrypt.org/docs/rate-limits/</li> </ol> <h4 id=certificate-information>Certificate Information<a class=headerlink href=#certificate-information title="Permanent link">&para;</a></h4> <p>View certificate details: <div class="language-bash highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1># Inside container</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>krakenhashes<span class=w> </span>certbot<span class=w> </span>certificates<span class=w> </span>--config-dir<span class=w> </span>/etc/krakenhashes/certs
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=c1># Certificate expiry</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>krakenhashes<span class=w> </span>openssl<span class=w> </span>x509<span class=w> </span>-enddate<span class=w> </span>-noout<span class=w> </span>-in<span class=w> </span>/etc/krakenhashes/certs/live/kraken.zerkersec.io/cert.pem
</span></code></pre></div></p> <h3 id=additional-domains>Additional Domains<a class=headerlink href=#additional-domains title="Permanent link">&para;</a></h3> <p>To add more domains/subdomains:</p> <ol> <li> <p>Add them to <code>KH_ADDITIONAL_DNS_NAMES</code> in <code>.env</code>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=nv>KH_ADDITIONAL_DNS_NAMES</span><span class=o>=</span>kraken.zerkersec.io,api.zerkersec.io,*.kraken.zerkersec.io
</span></code></pre></div></p> </li> <li> <p>Ensure all domains are in Cloudflare and accessible by your API token</p> </li> <li> <p>Restart the container to obtain certificates for all domains</p> </li> </ol> <h3 id=migration-from-self-signed>Migration from Self-Signed<a class=headerlink href=#migration-from-self-signed title="Permanent link">&para;</a></h3> <p>If migrating from self-signed certificates:</p> <ol> <li>Back up existing certificates (optional)</li> <li>Update <code>.env</code> as shown above</li> <li>Restart containers</li> <li>Update any clients/browsers that have the old CA certificate cached</li> </ol> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <h3 id=common-issues-and-solutions>Common Issues and Solutions<a class=headerlink href=#common-issues-and-solutions title="Permanent link">&para;</a></h3> <h4 id=browser-still-shows-certificate-warnings>Browser Still Shows Certificate Warnings<a class=headerlink href=#browser-still-shows-certificate-warnings title="Permanent link">&para;</a></h4> <ol> <li><strong>Certificate not properly installed</strong>:</li> <li>Verify the certificate is in the correct store (Trusted Root, not Personal or Intermediate)</li> <li>Check that you installed the CA certificate, not the server certificate</li> <li> <p>Some browsers cache certificate decisions - try clearing browser data or using incognito mode</p> </li> <li> <p><strong>Browser-specific issues</strong>:</p> </li> <li><strong>Chrome/Edge</strong>: May require restart after certificate installation</li> <li><strong>Firefox</strong>: Has its own certificate store - you may need to import via Firefox settings</li> <li> <p><strong>Safari</strong>: Requires explicit trust settings in Keychain Access</p> </li> <li> <p><strong>Certificate regenerated</strong>:</p> </li> <li>If the backend regenerated certificates, you need to reinstall the new CA certificate</li> <li>Remove the old certificate first to avoid conflicts</li> </ol> <h4 id=err_ssl_key_usage_incompatible-chromeedge>ERR_SSL_KEY_USAGE_INCOMPATIBLE (Chrome/Edge)<a class=headerlink href=#err_ssl_key_usage_incompatible-chromeedge title="Permanent link">&para;</a></h4> <p>This error indicates the certificate doesn't have the correct key usage flags. The updated certificate generation should prevent this, but if you encounter it:</p> <ol> <li>Ensure you're running the latest version with the certificate improvements</li> <li>Delete existing certificates and let them regenerate</li> <li>As a temporary workaround on Windows: <div class="language-powershell highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c># Create registry key to disable the check (use with caution)</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=nb>New-ItemProperty</span> <span class=n>-Path</span> <span class=s2>&quot;HKLM:\SOFTWARE\Policies\Microsoft\Edge&quot;</span> <span class=n>-Name</span> <span class=s2>&quot;RSAKeyUsageForLocalAnchorsEnabled&quot;</span> <span class=n>-Value</span> <span class=n>0</span> <span class=n>-PropertyType</span> <span class=n>DWORD</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=c># For Chrome:</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=nb>New-ItemProperty</span> <span class=n>-Path</span> <span class=s2>&quot;HKLM:\SOFTWARE\Policies\Google\Chrome&quot;</span> <span class=n>-Name</span> <span class=s2>&quot;RSAKeyUsageForLocalAnchorsEnabled&quot;</span> <span class=n>-Value</span> <span class=n>0</span> <span class=n>-PropertyType</span> <span class=n>DWORD</span>
</span></code></pre></div></li> </ol> <h4 id=certificate-not-trusted-on-linux>Certificate Not Trusted on Linux<a class=headerlink href=#certificate-not-trusted-on-linux title="Permanent link">&para;</a></h4> <ol> <li> <p><strong>Check certificate format</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1># Verify it&#39;s a valid PEM certificate</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>openssl<span class=w> </span>x509<span class=w> </span>-in<span class=w> </span>krakenhashes-ca.crt<span class=w> </span>-text<span class=w> </span>-noout
</span></code></pre></div></p> </li> <li> <p><strong>Verify installation</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1># Check if certificate is in the trust store</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>trust<span class=w> </span>list<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>krakenhashes
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=c1># For Debian/Ubuntu, check the symlink was created</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>ls<span class=w> </span>-la<span class=w> </span>/etc/ssl/certs/<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>krakenhashes
</span></code></pre></div></p> </li> <li> <p><strong>SELinux issues</strong> (RHEL/Fedora): <div class="language-bash highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1># Check for SELinux denials</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>sudo<span class=w> </span>ausearch<span class=w> </span>-m<span class=w> </span>avc<span class=w> </span>-ts<span class=w> </span>recent
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=c1># If needed, restore context</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>sudo<span class=w> </span>restorecon<span class=w> </span>-v<span class=w> </span>/etc/pki/ca-trust/source/anchors/krakenhashes-ca.crt
</span></code></pre></div></p> </li> </ol> <h4 id=certificate-chain-issues>Certificate Chain Issues<a class=headerlink href=#certificate-chain-issues title="Permanent link">&para;</a></h4> <ol> <li> <p><strong>Verify the full chain is being sent</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1># Check what certificates the server is presenting</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>openssl<span class=w> </span>s_client<span class=w> </span>-connect<span class=w> </span>your-server:31337<span class=w> </span>-showcerts
</span></code></pre></div></p> </li> <li> <p><strong>Validate certificate chain</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1># Download server certificate</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=nb>echo</span><span class=w> </span><span class=p>|</span><span class=w> </span>openssl<span class=w> </span>s_client<span class=w> </span>-connect<span class=w> </span>your-server:31337<span class=w> </span>-servername<span class=w> </span>your-server<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=w>  </span>openssl<span class=w> </span>x509<span class=w> </span>&gt;<span class=w> </span>server.crt
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=c1># Verify against CA</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>openssl<span class=w> </span>verify<span class=w> </span>-CAfile<span class=w> </span>krakenhashes-ca.crt<span class=w> </span>server.crt
</span></code></pre></div></p> </li> </ol> <h4 id=connection-refused-or-timeout>Connection Refused or Timeout<a class=headerlink href=#connection-refused-or-timeout title="Permanent link">&para;</a></h4> <ol> <li> <p><strong>Check the service is running</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1># Check if ports are listening</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>netstat<span class=w> </span>-tlnp<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-E<span class=w> </span><span class=s2>&quot;1337|31337&quot;</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=c1># or</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>ss<span class=w> </span>-tlnp<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-E<span class=w> </span><span class=s2>&quot;1337|31337&quot;</span>
</span></code></pre></div></p> </li> <li> <p><strong>Firewall rules</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=c1># Check firewall status</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>sudo<span class=w> </span>iptables<span class=w> </span>-L<span class=w> </span>-n<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-E<span class=w> </span><span class=s2>&quot;1337|31337&quot;</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=c1># or for firewalld</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>sudo<span class=w> </span>firewall-cmd<span class=w> </span>--list-all
</span></code></pre></div></p> </li> <li> <p><strong>Docker networking</strong> (if using Docker):</p> </li> <li>Ensure ports are properly mapped in docker-compose.yml</li> <li>Check Docker network connectivity</li> </ol> <h3 id=diagnostic-commands>Diagnostic Commands<a class=headerlink href=#diagnostic-commands title="Permanent link">&para;</a></h3> <h4 id=view-certificate-details>View Certificate Details<a class=headerlink href=#view-certificate-details title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1># View CA certificate details</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>openssl<span class=w> </span>x509<span class=w> </span>-in<span class=w> </span>krakenhashes-ca.crt<span class=w> </span>-text<span class=w> </span>-noout
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=c1># Check certificate dates</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>openssl<span class=w> </span>x509<span class=w> </span>-in<span class=w> </span>krakenhashes-ca.crt<span class=w> </span>-noout<span class=w> </span>-dates
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=c1># Check certificate subject and issuer</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>openssl<span class=w> </span>x509<span class=w> </span>-in<span class=w> </span>krakenhashes-ca.crt<span class=w> </span>-noout<span class=w> </span>-subject<span class=w> </span>-issuer
</span></code></pre></div> <h4 id=test-tls-connection>Test TLS Connection<a class=headerlink href=#test-tls-connection title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1># Test with curl (verbose)</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>curl<span class=w> </span>-v<span class=w> </span>https://your-server:31337/health
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=c1># Test with openssl</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>openssl<span class=w> </span>s_client<span class=w> </span>-connect<span class=w> </span>your-server:31337<span class=w> </span>-CAfile<span class=w> </span>krakenhashes-ca.crt
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=c1># Test cipher suites</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a>nmap<span class=w> </span>--script<span class=w> </span>ssl-enum-ciphers<span class=w> </span>-p<span class=w> </span><span class=m>31337</span><span class=w> </span>your-server
</span></code></pre></div> <h4 id=browser-certificate-debugging>Browser Certificate Debugging<a class=headerlink href=#browser-certificate-debugging title="Permanent link">&para;</a></h4> <ol> <li><strong>Chrome</strong>: Navigate to <code>chrome://settings/certificates</code> to manage certificates</li> <li><strong>Firefox</strong>: Navigate to <code>about:preferences#privacy</code> &gt; View Certificates</li> <li><strong>Edge</strong>: Navigate to <code>edge://settings/privacy</code> &gt; Manage certificates</li> </ol> <h3 id=removing-old-certificates>Removing Old Certificates<a class=headerlink href=#removing-old-certificates title="Permanent link">&para;</a></h3> <p>If you need to remove old certificates before installing new ones:</p> <p><strong>Arch Linux:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=c1># Find and remove the certificate</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>sudo<span class=w> </span>rm<span class=w> </span>-f<span class=w> </span>/etc/ca-certificates/trust-source/anchors/krakenhashes-ca.crt
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>sudo<span class=w> </span>update-ca-trust
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=c1># Or use trust anchor to remove by name</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>sudo<span class=w> </span>trust<span class=w> </span>anchor<span class=w> </span>--remove<span class=w> </span><span class=s2>&quot;KrakenHashes Root CA&quot;</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=c1># Remove from Chrome/Chromium</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>certutil<span class=w> </span>-d<span class=w> </span>sql:<span class=nv>$HOME</span>/.pki/nssdb<span class=w> </span>-D<span class=w> </span>-n<span class=w> </span><span class=s2>&quot;KrakenHashes Root CA&quot;</span>
</span></code></pre></div></p> <p><strong>Debian/Ubuntu:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>sudo<span class=w> </span>rm<span class=w> </span>/usr/local/share/ca-certificates/krakenhashes-ca.crt
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>sudo<span class=w> </span>update-ca-certificates<span class=w> </span>--fresh
</span></code></pre></div></p> <p><strong>Fedora/RHEL:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>sudo<span class=w> </span>rm<span class=w> </span>/etc/pki/ca-trust/source/anchors/krakenhashes-ca.crt
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>sudo<span class=w> </span>update-ca-trust
</span></code></pre></div></p> <h3 id=getting-help>Getting Help<a class=headerlink href=#getting-help title="Permanent link">&para;</a></h3> <p>If you're still experiencing issues:</p> <ol> <li> <p>Check the backend logs for certificate generation errors: <div class="language-bash highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;certificate\|tls\|ssl&quot;</span><span class=w> </span>/path/to/backend.log
</span></code></pre></div></p> </li> <li> <p>Ensure your environment variables are set correctly</p> </li> <li>Try regenerating certificates with a clean state</li> <li>Report issues at: https://github.com/ZerkerEOD/krakenhashes/issues</li> </ol> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 11, 2025 18:43:27 UTC"><span class=timeago datetime=2025-08-11T18:43:27+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 11, 2025 18:43:27 UTC">2025-08-11</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="July 13, 2025 09:31:16 UTC"><span class=timeago datetime=2025-07-13T09:31:16+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="July 13, 2025 09:31:16 UTC">2025-07-13</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/ZerkerEOD/krakenhashes target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://discord.gg/taafA9cSFV target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "navigation.top", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "header.autohide", "content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.92b07e13.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> <script src=../../../javascripts/extra.js></script> </body> </html>