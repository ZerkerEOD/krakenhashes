<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Distributed password cracking system for security professionals"><meta name=author content=ZerkerEOD><link href=https://zerkereod.github.io/krakenhashes/1.3.1/admin-guide/operations/monitoring/ rel=canonical><link href=../potfile/ rel=prev><link href=../backup/ rel=next><link rel=icon href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>System Monitoring - KrakenHashes Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#system-monitoring-guide class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="KrakenHashes Documentation" class="md-header__button md-logo" aria-label="KrakenHashes Documentation" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KrakenHashes Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> System Monitoring </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=red data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ZerkerEOD/krakenhashes title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ZerkerEOD/krakenhashes </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../user-guide/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../user-api/ class=md-tabs__link> User API </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> Admin Guide </a> </li> <li class=md-tabs__item> <a href=../../../agent-guide/ class=md-tabs__link> Agent Guide </a> </li> <li class=md-tabs__item> <a href=../../../deployment/ class=md-tabs__link> Deployment </a> </li> <li class=md-tabs__item> <a href=../../../developer/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../../reference/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../../troubleshooting/potfile-issues/ class=md-tabs__link> Troubleshooting </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="KrakenHashes Documentation" class="md-nav__button md-logo" aria-label="KrakenHashes Documentation" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> KrakenHashes Documentation </label> <div class=md-nav__source> <a href=https://github.com/ZerkerEOD/krakenhashes title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ZerkerEOD/krakenhashes </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../user-guide/ class=md-nav__link> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../user-api/ class=md-nav__link> <span class=md-ellipsis> User API </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> Admin Guide </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Admin Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex> <span class=md-ellipsis> System Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> System Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../system-setup/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../system-setup/ssl-tls/ class=md-nav__link> <span class=md-ellipsis> SSL/TLS Setup </span> </a> </li> <li class=md-nav__item> <a href=../../system-setup/email/ class=md-nav__link> <span class=md-ellipsis> Email Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../system-setup/authentication/ class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex> <span class=md-ellipsis> Resource Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Resource Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../resource-management/binaries/ class=md-nav__link> <span class=md-ellipsis> Managing Binaries </span> </a> </li> <li class=md-nav__item> <a href=../../resource-management/wordlists/ class=md-nav__link> <span class=md-ellipsis> Wordlist Management </span> </a> </li> <li class=md-nav__item> <a href=../../resource-management/rules/ class=md-nav__link> <span class=md-ellipsis> Rule Management </span> </a> </li> <li class=md-nav__item> <a href=../../resource-management/storage/ class=md-nav__link> <span class=md-ellipsis> Storage Architecture </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4 checked> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex> <span class=md-ellipsis> Operations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=true> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../users/ class=md-nav__link> <span class=md-ellipsis> User Management </span> </a> </li> <li class=md-nav__item> <a href=../clients/ class=md-nav__link> <span class=md-ellipsis> Client Management </span> </a> </li> <li class=md-nav__item> <a href=../agents/ class=md-nav__link> <span class=md-ellipsis> Agent Management </span> </a> </li> <li class=md-nav__item> <a href=../scheduling/ class=md-nav__link> <span class=md-ellipsis> Agent Scheduling </span> </a> </li> <li class=md-nav__item> <a href=../job-settings/ class=md-nav__link> <span class=md-ellipsis> Job Settings </span> </a> </li> <li class=md-nav__item> <a href=../potfile/ class=md-nav__link> <span class=md-ellipsis> Potfile Management </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> System Monitoring </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> System Monitoring </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#table-of-contents class=md-nav__link> <span class=md-ellipsis> Table of Contents </span> </a> </li> <li class=md-nav__item> <a href=#system-health-indicators class=md-nav__link> <span class=md-ellipsis> System Health Indicators </span> </a> <nav class=md-nav aria-label="System Health Indicators"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#health-check-endpoint class=md-nav__link> <span class=md-ellipsis> Health Check Endpoint </span> </a> </li> <li class=md-nav__item> <a href=#service-status-monitoring class=md-nav__link> <span class=md-ellipsis> Service Status Monitoring </span> </a> </li> <li class=md-nav__item> <a href=#docker-container-health class=md-nav__link> <span class=md-ellipsis> Docker Container Health </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#job-monitoring-and-statistics class=md-nav__link> <span class=md-ellipsis> Job Monitoring and Statistics </span> </a> <nav class=md-nav aria-label="Job Monitoring and Statistics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#job-execution-metrics class=md-nav__link> <span class=md-ellipsis> Job Execution Metrics </span> </a> </li> <li class=md-nav__item> <a href=#job-monitoring-endpoints class=md-nav__link> <span class=md-ellipsis> Job Monitoring Endpoints </span> </a> </li> <li class=md-nav__item> <a href=#job-progress-tracking class=md-nav__link> <span class=md-ellipsis> Job Progress Tracking </span> </a> </li> <li class=md-nav__item> <a href=#enhanced-job-details-view class=md-nav__link> <span class=md-ellipsis> Enhanced Job Details View </span> </a> </li> <li class=md-nav__item> <a href=#database-queries-for-job-monitoring class=md-nav__link> <span class=md-ellipsis> Database Queries for Job Monitoring </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#agent-performance-metrics class=md-nav__link> <span class=md-ellipsis> Agent Performance Metrics </span> </a> <nav class=md-nav aria-label="Agent Performance Metrics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#agent-metrics-collection class=md-nav__link> <span class=md-ellipsis> Agent Metrics Collection </span> </a> </li> <li class=md-nav__item> <a href=#agent-monitoring-endpoints class=md-nav__link> <span class=md-ellipsis> Agent Monitoring Endpoints </span> </a> </li> <li class=md-nav__item> <a href=#agent-health-monitoring class=md-nav__link> <span class=md-ellipsis> Agent Health Monitoring </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#job-scheduling-robustness-v121 class=md-nav__link> <span class=md-ellipsis> Job Scheduling Robustness (v1.2.1+) </span> </a> <nav class=md-nav aria-label="Job Scheduling Robustness (v1.2.1+)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#agent-crash-recovery class=md-nav__link> <span class=md-ellipsis> Agent Crash Recovery </span> </a> </li> <li class=md-nav__item> <a href=#agent-crash-patterns class=md-nav__link> <span class=md-ellipsis> Agent Crash Patterns </span> </a> </li> <li class=md-nav__item> <a href=#database-queries-for-agent-monitoring class=md-nav__link> <span class=md-ellipsis> Database Queries for Agent Monitoring </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#database-monitoring class=md-nav__link> <span class=md-ellipsis> Database Monitoring </span> </a> <nav class=md-nav aria-label="Database Monitoring"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#connection-pool-monitoring class=md-nav__link> <span class=md-ellipsis> Connection Pool Monitoring </span> </a> </li> <li class=md-nav__item> <a href=#table-statistics class=md-nav__link> <span class=md-ellipsis> Table Statistics </span> </a> </li> <li class=md-nav__item> <a href=#performance-metrics-tables class=md-nav__link> <span class=md-ellipsis> Performance Metrics Tables </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#log-analysis-and-alerting class=md-nav__link> <span class=md-ellipsis> Log Analysis and Alerting </span> </a> <nav class=md-nav aria-label="Log Analysis and Alerting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#log-configuration class=md-nav__link> <span class=md-ellipsis> Log Configuration </span> </a> </li> <li class=md-nav__item> <a href=#log-locations class=md-nav__link> <span class=md-ellipsis> Log Locations </span> </a> </li> <li class=md-nav__item> <a href=#log-format class=md-nav__link> <span class=md-ellipsis> Log Format </span> </a> </li> <li class=md-nav__item> <a href=#key-log-patterns-to-monitor class=md-nav__link> <span class=md-ellipsis> Key Log Patterns to Monitor </span> </a> </li> <li class=md-nav__item> <a href=#alert-configuration class=md-nav__link> <span class=md-ellipsis> Alert Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#performance-baselines class=md-nav__link> <span class=md-ellipsis> Performance Baselines </span> </a> <nav class=md-nav aria-label="Performance Baselines"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#establishing-baselines class=md-nav__link> <span class=md-ellipsis> Establishing Baselines </span> </a> </li> <li class=md-nav__item> <a href=#benchmark-tracking class=md-nav__link> <span class=md-ellipsis> Benchmark Tracking </span> </a> </li> <li class=md-nav__item> <a href=#performance-degradation-detection class=md-nav__link> <span class=md-ellipsis> Performance Degradation Detection </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring-dashboards-and-tools class=md-nav__link> <span class=md-ellipsis> Monitoring Dashboards and Tools </span> </a> <nav class=md-nav aria-label="Monitoring Dashboards and Tools"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#built-in-monitoring-endpoints class=md-nav__link> <span class=md-ellipsis> Built-in Monitoring Endpoints </span> </a> </li> <li class=md-nav__item> <a href=#external-monitoring-integration class=md-nav__link> <span class=md-ellipsis> External Monitoring Integration </span> </a> </li> <li class=md-nav__item> <a href=#monitoring-best-practices class=md-nav__link> <span class=md-ellipsis> Monitoring Best Practices </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting-guide class=md-nav__link> <span class=md-ellipsis> Troubleshooting Guide </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#maintenance-and-cleanup class=md-nav__link> <span class=md-ellipsis> Maintenance and Cleanup </span> </a> <nav class=md-nav aria-label="Maintenance and Cleanup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#automated-cleanup-services class=md-nav__link> <span class=md-ellipsis> Automated Cleanup Services </span> </a> </li> <li class=md-nav__item> <a href=#manual-maintenance-tasks class=md-nav__link> <span class=md-ellipsis> Manual Maintenance Tasks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../backup/ class=md-nav__link> <span class=md-ellipsis> Backup Procedures </span> </a> </li> <li class=md-nav__item> <a href=../data-retention/ class=md-nav__link> <span class=md-ellipsis> Data Retention </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../security/ class=md-nav__link> <span class=md-ellipsis> Security Guide </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advanced/presets/ class=md-nav__link> <span class=md-ellipsis> Preset Jobs & Workflows </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/job-priority/ class=md-nav__link> <span class=md-ellipsis> Job Priority </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/chunking/ class=md-nav__link> <span class=md-ellipsis> Job Chunking System </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/performance/ class=md-nav__link> <span class=md-ellipsis> Performance Tuning </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../agent-guide/ class=md-nav__link> <span class=md-ellipsis> Agent Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../deployment/ class=md-nav__link> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../developer/ class=md-nav__link> <span class=md-ellipsis> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../reference/ class=md-nav__link> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../troubleshooting/potfile-issues/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../../ class=md-path__link> <span class=md-ellipsis> Admin Guide </span> </a> </li> <li class=md-path__item> <a href=../users/ class=md-path__link> <span class=md-ellipsis> Operations </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id=system-monitoring-guide>System Monitoring Guide<a class=headerlink href=#system-monitoring-guide title="Permanent link">&para;</a></h1> <p>This guide covers comprehensive monitoring strategies for KrakenHashes, including system health indicators, performance metrics, logging, and alerting configurations.</p> <h2 id=table-of-contents>Table of Contents<a class=headerlink href=#table-of-contents title="Permanent link">&para;</a></h2> <ol> <li><a href=#system-health-indicators>System Health Indicators</a></li> <li><a href=#job-monitoring-and-statistics>Job Monitoring and Statistics</a></li> <li><a href=#agent-performance-metrics>Agent Performance Metrics</a></li> <li><a href=#database-monitoring>Database Monitoring</a></li> <li><a href=#log-analysis-and-alerting>Log Analysis and Alerting</a></li> <li><a href=#performance-baselines>Performance Baselines</a></li> <li><a href=#monitoring-dashboards-and-tools>Monitoring Dashboards and Tools</a></li> </ol> <h2 id=system-health-indicators>System Health Indicators<a class=headerlink href=#system-health-indicators title="Permanent link">&para;</a></h2> <h3 id=health-check-endpoint>Health Check Endpoint<a class=headerlink href=#health-check-endpoint title="Permanent link">&para;</a></h3> <p>The system provides a basic health check endpoint for monitoring service availability:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># Check system health</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>curl<span class=w> </span>https://localhost:31337/api/health
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=c1># Expected response</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=m>200</span><span class=w> </span>OK
</span></code></pre></div> <h3 id=service-status-monitoring>Service Status Monitoring<a class=headerlink href=#service-status-monitoring title="Permanent link">&para;</a></h3> <p>Monitor the following key services:</p> <ol> <li><strong>Backend API Service</strong></li> <li>Port: 31337 (HTTPS), 1337 (HTTP for CA cert)</li> <li>Health endpoint: <code>/api/health</code></li> <li> <p>Version endpoint: <code>/api/version</code></p> </li> <li> <p><strong>PostgreSQL Database</strong></p> </li> <li>Port: 5432</li> <li>Connection pool status</li> <li> <p>Active connections</p> </li> <li> <p><strong>WebSocket Service</strong></p> </li> <li>Agent connections</li> <li>Heartbeat status</li> <li>Connection count</li> </ol> <h3 id=docker-container-health>Docker Container Health<a class=headerlink href=#docker-container-health title="Permanent link">&para;</a></h3> <p>Monitor container status using Docker commands:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># Check container status</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>docker-compose<span class=w> </span>ps
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=c1># Monitor resource usage</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>docker<span class=w> </span>stats
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=c1># Check container logs</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>docker-compose<span class=w> </span>logs<span class=w> </span>-f<span class=w> </span>backend
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>docker-compose<span class=w> </span>logs<span class=w> </span>-f<span class=w> </span>postgres
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>docker-compose<span class=w> </span>logs<span class=w> </span>-f<span class=w> </span>app
</span></code></pre></div> <h2 id=job-monitoring-and-statistics>Job Monitoring and Statistics<a class=headerlink href=#job-monitoring-and-statistics title="Permanent link">&para;</a></h2> <h3 id=job-execution-metrics>Job Execution Metrics<a class=headerlink href=#job-execution-metrics title="Permanent link">&para;</a></h3> <p>The system tracks comprehensive job execution metrics:</p> <ol> <li><strong>Job Status Distribution</strong></li> <li>Pending jobs count</li> <li>Running jobs count</li> <li>Completed jobs count</li> <li>Failed jobs count</li> <li> <p>Cancelled jobs count</p> </li> <li> <p><strong>Job Performance Indicators</strong></p> </li> <li>Average job completion time</li> <li>Job success rate</li> <li>Hash cracking rate</li> <li>Keyspace coverage</li> </ol> <h3 id=job-monitoring-endpoints>Job Monitoring Endpoints<a class=headerlink href=#job-monitoring-endpoints title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># List all jobs with pagination</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>GET<span class=w> </span>/api/jobs?page<span class=o>=</span><span class=m>1</span><span class=p>&amp;</span><span class=nv>page_size</span><span class=o>=</span><span class=m>20</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1># Get specific job details</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>GET<span class=w> </span>/api/jobs/<span class=o>{</span>job_id<span class=o>}</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1># Get job statistics</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>GET<span class=w> </span>/api/jobs/stats
</span></code></pre></div> <h3 id=job-progress-tracking>Job Progress Tracking<a class=headerlink href=#job-progress-tracking title="Permanent link">&para;</a></h3> <p>Monitor job progress through these metrics:</p> <ul> <li><strong>Dispatched Percentage</strong>: Portion of keyspace distributed to agents</li> <li><strong>Searched Percentage</strong>: Portion of keyspace actually processed</li> <li><strong>Overall Progress</strong>: Combined metric considering rule splitting</li> <li><strong>Cracked Count</strong>: Number of successfully cracked hashes</li> <li><strong>Total Speed</strong>: Combined hash rate across all agents</li> </ul> <h3 id=enhanced-job-details-view>Enhanced Job Details View<a class=headerlink href=#enhanced-job-details-view title="Permanent link">&para;</a></h3> <p>The Job Details page now includes a comprehensive completed tasks history that provides administrators with:</p> <h4 id=completed-tasks-monitoring>Completed Tasks Monitoring<a class=headerlink href=#completed-tasks-monitoring title="Permanent link">&para;</a></h4> <ul> <li><strong>Historical Performance Data</strong>: View hash rates achieved by each agent for completed tasks</li> <li><strong>Task Completion Patterns</strong>: Analyze when and how tasks were completed across the job lifecycle</li> <li><strong>Keyspace Analysis</strong>: Identify which keyspace ranges were most productive for password cracking</li> <li><strong>Audit Trail</strong>: Maintain a complete record of job execution across distributed agents</li> </ul> <h4 id=available-metrics>Available Metrics<a class=headerlink href=#available-metrics title="Permanent link">&para;</a></h4> <p>For each completed task, administrators can review: - Agent assignment and performance metrics - Exact keyspace ranges processed - Completion timestamps for timeline analysis - Number of cracks found per task - Average hash rate achieved during execution</p> <h4 id=use-cases-for-administrators>Use Cases for Administrators<a class=headerlink href=#use-cases-for-administrators title="Permanent link">&para;</a></h4> <ul> <li><strong>Performance Optimization</strong>: Compare agent efficiency across tasks to identify hardware or configuration issues</li> <li><strong>Resource Planning</strong>: Analyze task distribution patterns to optimize future job configurations</li> <li><strong>Troubleshooting</strong>: Identify if specific agents or keyspace ranges consistently underperform</li> <li><strong>Compliance Reporting</strong>: Maintain detailed execution records for security audits</li> </ul> <div class="admonition note"> <p class=admonition-title>Data Retention</p> <p>Completed tasks are retained even after job completion, providing long-term visibility into job execution history. This data persists according to your configured retention policies.</p> </div> <h3 id=database-queries-for-job-monitoring>Database Queries for Job Monitoring<a class=headerlink href=#database-queries-for-job-monitoring title="Permanent link">&para;</a></h3> <div class="language-sql highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>-- Active jobs by status</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=k>SELECT</span><span class=w> </span><span class=n>status</span><span class=p>,</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>count</span><span class=w> </span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=k>FROM</span><span class=w> </span><span class=n>job_executions</span><span class=w> </span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>status</span><span class=p>;</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=c1>-- Jobs with high failure rate</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=k>SELECT</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>error_message</span><span class=p>,</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>       </span><span class=k>COUNT</span><span class=p>(</span><span class=n>jt</span><span class=p>.</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>total_tasks</span><span class=p>,</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>       </span><span class=k>SUM</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;failed&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>failed_tasks</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=k>FROM</span><span class=w> </span><span class=n>job_executions</span><span class=w> </span><span class=n>je</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=k>JOIN</span><span class=w> </span><span class=n>job_tasks</span><span class=w> </span><span class=n>jt</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>job_execution_id</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=k>WHERE</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;failed&#39;</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>error_message</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=k>HAVING</span><span class=w> </span><span class=k>SUM</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;failed&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=c1>-- Job performance over time</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>    </span><span class=n>DATE_TRUNC</span><span class=p>(</span><span class=s1>&#39;hour&#39;</span><span class=p>,</span><span class=w> </span><span class=n>created_at</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>hour</span><span class=p>,</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>    </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>jobs_created</span><span class=p>,</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>    </span><span class=k>AVG</span><span class=p>(</span><span class=k>EXTRACT</span><span class=p>(</span><span class=n>EPOCH</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=n>completed_at</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>created_at</span><span class=p>)))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>avg_duration_seconds</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=k>FROM</span><span class=w> </span><span class=n>job_executions</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=k>WHERE</span><span class=w> </span><span class=n>completed_at</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>hour</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>hour</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span>
</span></code></pre></div> <h2 id=agent-performance-metrics>Agent Performance Metrics<a class=headerlink href=#agent-performance-metrics title="Permanent link">&para;</a></h2> <h3 id=agent-metrics-collection>Agent Metrics Collection<a class=headerlink href=#agent-metrics-collection title="Permanent link">&para;</a></h3> <p>The agent collects and reports the following metrics:</p> <ol> <li><strong>System Metrics</strong></li> <li>CPU usage percentage</li> <li>Memory usage percentage</li> <li>GPU utilization</li> <li>GPU temperature</li> <li> <p>GPU memory usage</p> </li> <li> <p><strong>Performance Metrics</strong></p> </li> <li>Hash rate per device</li> <li>Power usage</li> </ol> <p><img alt="Device Monitoring Dashboard" src=../../../assets/images/screenshots/device_monitoring_2.png> <em>Device monitoring dashboard showing real-time temperature, utilization, fan speed, and hash rate metrics across multiple agents</em></p> <p><img alt="Device Monitoring Alternative View" src=../../../assets/images/screenshots/device_monitoring_2.png> <em>Alternative view of the device monitoring interface with detailed performance graphs and timeline data</em> - Fan speed - Device temperature</p> <h3 id=agent-monitoring-endpoints>Agent Monitoring Endpoints<a class=headerlink href=#agent-monitoring-endpoints title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># List all agents</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>GET<span class=w> </span>/api/admin/agents
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1># Get agent details with devices</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>GET<span class=w> </span>/api/admin/agents/<span class=o>{</span>agent_id<span class=o>}</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=c1># Get agent performance metrics</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>GET<span class=w> </span>/api/admin/agents/<span class=o>{</span>agent_id<span class=o>}</span>/metrics?timeRange<span class=o>=</span>1h<span class=p>&amp;</span><span class=nv>metrics</span><span class=o>=</span>temperature,utilization,fanspeed,hashrate
</span></code></pre></div> <h3 id=agent-health-monitoring>Agent Health Monitoring<a class=headerlink href=#agent-health-monitoring title="Permanent link">&para;</a></h3> <p>Monitor agent health through:</p> <ol> <li><strong>Heartbeat Status</strong></li> <li>Last heartbeat timestamp</li> <li>Connection status (active/inactive)</li> <li> <p>Heartbeat interval (30 seconds default)</p> </li> <li> <p><strong>Error Tracking</strong></p> </li> <li>Last error message</li> <li>Error frequency</li> <li>Recovery status</li> </ol> <h2 id=job-scheduling-robustness-v121>Job Scheduling Robustness (v1.2.1+)<a class=headerlink href=#job-scheduling-robustness-v121 title="Permanent link">&para;</a></h2> <h3 id=agent-crash-recovery>Agent Crash Recovery<a class=headerlink href=#agent-crash-recovery title="Permanent link">&para;</a></h3> <p>Starting with version 1.2.1, the system includes automatic recovery from agent crashes with improved keyspace accounting:</p> <p><strong>Problem Solved</strong>: When an agent crashes while executing a task, the system now properly returns the unfinished work back to the pool for reassignment.</p> <p><strong>How It Works</strong>: 1. Agent crashes with task assigned (e.g., keyspace 0-100,000) 2. Backend detects disconnect and resets task to "pending" 3. <strong>NEW</strong>: <code>dispatched_keyspace</code> is decremented by the task's chunk size 4. Scheduler can now reassign the work to another agent 5. No manual intervention required</p> <p><strong>Monitoring Recovery Operations</strong>:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1>-- Check for jobs with recently reset tasks</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=k>SELECT</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>job_id</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>job_name</span><span class=p>,</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>status</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>dispatched_keyspace</span><span class=p>,</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>total_keyspace</span><span class=p>,</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class=k>COUNT</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;pending&#39;</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>               </span><span class=k>AND</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_start</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>          </span><span class=k>THEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>reset_tasks</span><span class=p>,</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>    </span><span class=k>COUNT</span><span class=p>(</span><span class=n>jt</span><span class=p>.</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>total_tasks</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=k>FROM</span><span class=w> </span><span class=n>job_executions</span><span class=w> </span><span class=n>je</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=k>JOIN</span><span class=w> </span><span class=n>job_tasks</span><span class=w> </span><span class=n>jt</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>job_execution_id</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=k>WHERE</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;running&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;pending&#39;</span><span class=p>)</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>status</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>dispatched_keyspace</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>total_keyspace</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=k>HAVING</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;pending&#39;</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>                   </span><span class=k>AND</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_start</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>              </span><span class=k>THEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span></code></pre></div> <p><strong>Expected Results:</strong> - Reset tasks should be reassigned within next scheduling cycle - <code>dispatched_keyspace</code> should be less than <code>total_keyspace</code> when reset tasks exist - No jobs should remain stuck with pending work that can't be assigned</p> <p><strong>Validation Query</strong>: <div class="language-sql highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>-- Verify keyspace accounting is correct</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=k>SELECT</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>total_keyspace</span><span class=p>,</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=n>je</span><span class=p>.</span><span class=n>dispatched_keyspace</span><span class=p>,</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=k>COALESCE</span><span class=p>(</span><span class=k>SUM</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s1>&#39;pending&#39;</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>                      </span><span class=k>THEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_end</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_start</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>                      </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>END</span><span class=p>),</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>actual_dispatched</span><span class=p>,</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>    </span><span class=p>(</span><span class=n>je</span><span class=p>.</span><span class=n>dispatched_keyspace</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=k>COALESCE</span><span class=p>(</span><span class=k>SUM</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s1>&#39;pending&#39;</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=w>                                                  </span><span class=k>THEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_end</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_start</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=w>                                                  </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>END</span><span class=p>),</span><span class=w> </span><span class=mi>0</span><span class=p>))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>keyspace_mismatch</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=k>FROM</span><span class=w> </span><span class=n>job_executions</span><span class=w> </span><span class=n>je</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>job_tasks</span><span class=w> </span><span class=n>jt</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>job_execution_id</span>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=k>WHERE</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;running&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;pending&#39;</span><span class=p>)</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>total_keyspace</span><span class=p>,</span><span class=w> </span><span class=n>je</span><span class=p>.</span><span class=n>dispatched_keyspace</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=k>HAVING</span><span class=w> </span><span class=k>ABS</span><span class=p>(</span><span class=n>je</span><span class=p>.</span><span class=n>dispatched_keyspace</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=k>COALESCE</span><span class=p>(</span><span class=k>SUM</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>status</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s1>&#39;pending&#39;</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=w>                                                       </span><span class=k>THEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_end</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>keyspace_start</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=w>                                                       </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>END</span><span class=p>),</span><span class=w> </span><span class=mi>0</span><span class=p>))</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1000</span><span class=p>;</span>
</span></code></pre></div></p> <p><strong>Interpretation:</strong> - <code>keyspace_mismatch</code> should be near zero (within 1000 for rounding) - Large mismatches indicate potential accounting issues - Empty results = healthy keyspace tracking</p> <h3 id=agent-crash-patterns>Agent Crash Patterns<a class=headerlink href=#agent-crash-patterns title="Permanent link">&para;</a></h3> <p>Track agent reliability:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>-- Agents with frequent task resets (potential stability issues)</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=k>SELECT</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>,</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>    </span><span class=k>COUNT</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>retry_count</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>reset_count</span><span class=p>,</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>    </span><span class=k>COUNT</span><span class=p>(</span><span class=n>jt</span><span class=p>.</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>total_tasks</span><span class=p>,</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>    </span><span class=p>(</span><span class=k>COUNT</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>retry_count</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>END</span><span class=p>)::</span><span class=nb>float</span><span class=w> </span><span class=o>/</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>     </span><span class=k>NULLIF</span><span class=p>(</span><span class=k>COUNT</span><span class=p>(</span><span class=n>jt</span><span class=p>.</span><span class=n>id</span><span class=p>),</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>100</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>reset_percentage</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=k>FROM</span><span class=w> </span><span class=n>agents</span><span class=w> </span><span class=n>a</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>job_tasks</span><span class=w> </span><span class=n>jt</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>agent_id</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=k>WHERE</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>created_at</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;7 days&#39;</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>name</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=k>HAVING</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>jt</span><span class=p>.</span><span class=n>retry_count</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>5</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>reset_percentage</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span>
</span></code></pre></div> <p><strong>Action Items:</strong> - Agents with &gt;10% reset rate may have stability issues - Check agent logs for crashes or disconnections - Investigate hardware problems (overheating, power issues) - Consider updating agent software if outdated</p> <h3 id=database-queries-for-agent-monitoring>Database Queries for Agent Monitoring<a class=headerlink href=#database-queries-for-agent-monitoring title="Permanent link">&para;</a></h3> <div class="language-sql highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>-- Agents with stale heartbeats</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=k>SELECT</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>last_heartbeat</span><span class=p>,</span><span class=w> </span><span class=n>status</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=k>FROM</span><span class=w> </span><span class=n>agents</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=k>WHERE</span><span class=w> </span><span class=n>last_heartbeat</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;5 minutes&#39;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>  </span><span class=k>AND</span><span class=w> </span><span class=n>status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;active&#39;</span><span class=p>;</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=c1>-- Agent performance metrics</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>agent_name</span><span class=p>,</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>    </span><span class=n>apm</span><span class=p>.</span><span class=n>metric_type</span><span class=p>,</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>    </span><span class=k>AVG</span><span class=p>(</span><span class=n>apm</span><span class=p>.</span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>avg_value</span><span class=p>,</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>    </span><span class=k>MAX</span><span class=p>(</span><span class=n>apm</span><span class=p>.</span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>max_value</span><span class=p>,</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>    </span><span class=k>MIN</span><span class=p>(</span><span class=n>apm</span><span class=p>.</span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>min_value</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=k>FROM</span><span class=w> </span><span class=n>agents</span><span class=w> </span><span class=n>a</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=k>JOIN</span><span class=w> </span><span class=n>agent_performance_metrics</span><span class=w> </span><span class=n>apm</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=n>agent_id</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=k>WHERE</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=k>timestamp</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;1 hour&#39;</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=n>metric_type</span><span class=p>;</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=c1>-- GPU device utilization</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>agent_name</span><span class=p>,</span>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=w>    </span><span class=n>apm</span><span class=p>.</span><span class=n>device_name</span><span class=p>,</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=w>    </span><span class=n>apm</span><span class=p>.</span><span class=n>metric_type</span><span class=p>,</span>
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=w>    </span><span class=k>AVG</span><span class=p>(</span><span class=n>apm</span><span class=p>.</span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>avg_utilization</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=k>FROM</span><span class=w> </span><span class=n>agents</span><span class=w> </span><span class=n>a</span>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=k>JOIN</span><span class=w> </span><span class=n>agent_performance_metrics</span><span class=w> </span><span class=n>apm</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=n>agent_id</span>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=k>WHERE</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=n>metric_type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;utilization&#39;</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=w>  </span><span class=k>AND</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=k>timestamp</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;1 hour&#39;</span>
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=n>device_name</span><span class=p>,</span><span class=w> </span><span class=n>apm</span><span class=p>.</span><span class=n>metric_type</span>
</span><span id=__span-8-30><a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>avg_utilization</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span>
</span></code></pre></div> <h2 id=database-monitoring>Database Monitoring<a class=headerlink href=#database-monitoring title="Permanent link">&para;</a></h2> <h3 id=connection-pool-monitoring>Connection Pool Monitoring<a class=headerlink href=#connection-pool-monitoring title="Permanent link">&para;</a></h3> <p>Monitor database connection health:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>-- Active connections by state</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=k>SELECT</span><span class=w> </span><span class=k>state</span><span class=p>,</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=k>FROM</span><span class=w> </span><span class=n>pg_stat_activity</span><span class=w> </span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>state</span><span class=p>;</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=c1>-- Long-running queries</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>    </span><span class=n>pid</span><span class=p>,</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>    </span><span class=n>now</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>pg_stat_activity</span><span class=p>.</span><span class=n>query_start</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>duration</span><span class=p>,</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>    </span><span class=n>query</span><span class=p>,</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>    </span><span class=k>state</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=k>FROM</span><span class=w> </span><span class=n>pg_stat_activity</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=k>WHERE</span><span class=w> </span><span class=p>(</span><span class=n>now</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>pg_stat_activity</span><span class=p>.</span><span class=n>query_start</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=nb>interval</span><span class=w> </span><span class=s1>&#39;5 minutes&#39;</span><span class=p>;</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=c1>-- Database size growth</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>    </span><span class=n>pg_database</span><span class=p>.</span><span class=n>datname</span><span class=p>,</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=w>    </span><span class=n>pg_size_pretty</span><span class=p>(</span><span class=n>pg_database_size</span><span class=p>(</span><span class=n>pg_database</span><span class=p>.</span><span class=n>datname</span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>size</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=k>FROM</span><span class=w> </span><span class=n>pg_database</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>pg_database_size</span><span class=p>(</span><span class=n>pg_database</span><span class=p>.</span><span class=n>datname</span><span class=p>)</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span>
</span></code></pre></div> <h3 id=table-statistics>Table Statistics<a class=headerlink href=#table-statistics title="Permanent link">&para;</a></h3> <p>Monitor table growth and performance:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1>-- Table sizes</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=k>SELECT</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=n>schemaname</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>table_schema</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=n>tablename</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>table_name</span><span class=p>,</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=n>pg_size_pretty</span><span class=p>(</span><span class=n>pg_total_relation_size</span><span class=p>(</span><span class=n>schemaname</span><span class=o>||</span><span class=s1>&#39;.&#39;</span><span class=o>||</span><span class=n>tablename</span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>size</span><span class=p>,</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=n>pg_size_pretty</span><span class=p>(</span><span class=n>pg_relation_size</span><span class=p>(</span><span class=n>schemaname</span><span class=o>||</span><span class=s1>&#39;.&#39;</span><span class=o>||</span><span class=n>tablename</span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>data_size</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=k>FROM</span><span class=w> </span><span class=n>pg_tables</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=k>WHERE</span><span class=w> </span><span class=n>schemaname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;public&#39;</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>pg_total_relation_size</span><span class=p>(</span><span class=n>schemaname</span><span class=o>||</span><span class=s1>&#39;.&#39;</span><span class=o>||</span><span class=n>tablename</span><span class=p>)</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=c1>-- Index usage</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=k>SELECT</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=w>    </span><span class=n>schemaname</span><span class=p>,</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>    </span><span class=n>tablename</span><span class=p>,</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>    </span><span class=n>indexname</span><span class=p>,</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>    </span><span class=n>idx_scan</span><span class=p>,</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>    </span><span class=n>idx_tup_read</span><span class=p>,</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=w>    </span><span class=n>idx_tup_fetch</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=k>FROM</span><span class=w> </span><span class=n>pg_stat_user_indexes</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a><span class=k>WHERE</span><span class=w> </span><span class=n>schemaname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;public&#39;</span>
</span><span id=__span-10-21><a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>idx_scan</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span>
</span></code></pre></div> <h3 id=performance-metrics-tables>Performance Metrics Tables<a class=headerlink href=#performance-metrics-tables title="Permanent link">&para;</a></h3> <p>The system maintains dedicated tables for performance tracking:</p> <ol> <li><strong>agent_metrics</strong> - Real-time agent system metrics</li> <li><strong>agent_performance_metrics</strong> - Detailed performance data with aggregation</li> <li><strong>job_performance_metrics</strong> - Job execution performance tracking</li> <li><strong>agent_benchmarks</strong> - Hashcat benchmark results per agent</li> </ol> <h2 id=log-analysis-and-alerting>Log Analysis and Alerting<a class=headerlink href=#log-analysis-and-alerting title="Permanent link">&para;</a></h2> <h3 id=log-configuration>Log Configuration<a class=headerlink href=#log-configuration title="Permanent link">&para;</a></h3> <p>Configure logging through environment variables:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Enable debug logging</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=nb>export</span><span class=w> </span><span class=nv>DEBUG</span><span class=o>=</span><span class=nb>true</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=c1># Set log level (DEBUG, INFO, WARNING, ERROR)</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=nb>export</span><span class=w> </span><span class=nv>LOG_LEVEL</span><span class=o>=</span>INFO
</span></code></pre></div> <h3 id=log-locations>Log Locations<a class=headerlink href=#log-locations title="Permanent link">&para;</a></h3> <p>When running with Docker, logs are stored in:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>/home/zerkereod/Programming/passwordCracking/kh-backend/logs/krakenhashes/
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a> backend/      # Backend application logs
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a> postgres/     # PostgreSQL logs
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a> nginx/        # Nginx/frontend logs
</span></code></pre></div> <h3 id=log-format>Log Format<a class=headerlink href=#log-format title="Permanent link">&para;</a></h3> <p>The system uses structured logging with the following format: <div class="language-text highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>[LEVEL] [TIMESTAMP] [FILE:LINE] [FUNCTION] MESSAGE
</span></code></pre></div></p> <p>Example: <div class="language-text highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>[INFO] [2025-08-01 15:04:05.000] [/path/to/file.go:42] [FunctionName] Processing job execution
</span></code></pre></div></p> <h3 id=key-log-patterns-to-monitor>Key Log Patterns to Monitor<a class=headerlink href=#key-log-patterns-to-monitor title="Permanent link">&para;</a></h3> <ol> <li> <p><strong>Error Patterns</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1># Find all errors across logs</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;error&quot;</span><span class=w> </span>/home/zerkereod/Programming/passwordCracking/kh-backend/logs/krakenhashes/*/*.log
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=c1># Find database connection errors</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;database.*error\|connection.*failed&quot;</span><span class=w> </span>logs/backend/*.log
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=c1># Find agent disconnections</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;agent.*disconnect\|websocket.*close&quot;</span><span class=w> </span>logs/backend/*.log
</span></code></pre></div></p> </li> <li> <p><strong>Performance Issues</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1># Find slow queries</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;slow query\|query took&quot;</span><span class=w> </span>logs/backend/*.log
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1># Find memory issues</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;out of memory\|memory.*limit&quot;</span><span class=w> </span>logs/*/*.log
</span></code></pre></div></p> </li> <li> <p><strong>Security Events</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># Find authentication failures</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;auth.*fail\|login.*fail\|unauthorized&quot;</span><span class=w> </span>logs/backend/*.log
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=c1># Find suspicious activity</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;invalid.*token\|forbidden\|suspicious&quot;</span><span class=w> </span>logs/backend/*.log
</span></code></pre></div></p> </li> </ol> <h3 id=alert-configuration>Alert Configuration<a class=headerlink href=#alert-configuration title="Permanent link">&para;</a></h3> <p>Set up alerts for critical events:</p> <ol> <li><strong>System Health Alerts</strong></li> <li>Service down (health check fails)</li> <li>Database connection pool exhausted</li> <li> <p>High error rate (&gt;5% of requests)</p> </li> <li> <p><strong>Performance Alerts</strong></p> </li> <li>CPU usage &gt; 90% for 5 minutes</li> <li>Memory usage &gt; 85%</li> <li>Database query time &gt; 5 seconds</li> <li> <p>Job queue backlog &gt; 100 jobs</p> </li> <li> <p><strong>Security Alerts</strong></p> </li> <li>Multiple failed login attempts</li> <li>Unauthorized API access attempts</li> <li>Agent registration anomalies</li> </ol> <h2 id=performance-baselines>Performance Baselines<a class=headerlink href=#performance-baselines title="Permanent link">&para;</a></h2> <h3 id=establishing-baselines>Establishing Baselines<a class=headerlink href=#establishing-baselines title="Permanent link">&para;</a></h3> <p>Monitor and document normal operating parameters:</p> <ol> <li><strong>System Resource Baselines</strong></li> <li>Normal CPU usage: 20-40% (idle), 60-80% (active jobs)</li> <li>Memory usage: 2-4GB (base), +1GB per 1M hashes</li> <li> <p>Database connections: 10-20 (normal load)</p> </li> <li> <p><strong>Job Performance Baselines</strong></p> </li> <li>Job creation rate: 10-50 jobs/hour</li> <li>Average job duration: Varies by attack type</li> <li> <p>Hash processing rate: Device-dependent</p> </li> <li> <p><strong>Agent Performance Baselines</strong></p> </li> <li>Heartbeat interval: 30 seconds</li> <li>Benchmark cache duration: 24 hours</li> <li>GPU utilization: 90-100% during jobs</li> </ol> <h3 id=benchmark-tracking>Benchmark Tracking<a class=headerlink href=#benchmark-tracking title="Permanent link">&para;</a></h3> <p>The system automatically tracks agent benchmarks:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>-- View agent benchmarks</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>agent_name</span><span class=p>,</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>    </span><span class=n>ab</span><span class=p>.</span><span class=n>attack_mode</span><span class=p>,</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>    </span><span class=n>ab</span><span class=p>.</span><span class=n>hash_type</span><span class=p>,</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=w>    </span><span class=n>ab</span><span class=p>.</span><span class=n>speed</span><span class=p>,</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=w>    </span><span class=n>ab</span><span class=p>.</span><span class=n>updated_at</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=k>FROM</span><span class=w> </span><span class=n>agents</span><span class=w> </span><span class=n>a</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=k>JOIN</span><span class=w> </span><span class=n>agent_benchmarks</span><span class=w> </span><span class=n>ab</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ab</span><span class=p>.</span><span class=n>agent_id</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>ab</span><span class=p>.</span><span class=n>attack_mode</span><span class=p>,</span><span class=w> </span><span class=n>ab</span><span class=p>.</span><span class=n>hash_type</span><span class=p>;</span>
</span></code></pre></div> <h3 id=performance-degradation-detection>Performance Degradation Detection<a class=headerlink href=#performance-degradation-detection title="Permanent link">&para;</a></h3> <p>Monitor for performance degradation:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1>-- Compare current vs historical performance</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=k>WITH</span><span class=w> </span><span class=n>current_metrics</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>    </span><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>        </span><span class=n>agent_id</span><span class=p>,</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>        </span><span class=k>AVG</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>current_avg</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>agent_performance_metrics</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>metric_type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;hash_rate&#39;</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>      </span><span class=k>AND</span><span class=w> </span><span class=k>timestamp</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;1 hour&#39;</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=w>    </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>agent_id</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=p>),</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=n>historical_metrics</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>    </span><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=w>        </span><span class=n>agent_id</span><span class=p>,</span>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=w>        </span><span class=k>AVG</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>historical_avg</span>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>agent_performance_metrics</span>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>metric_type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;hash_rate&#39;</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=w>      </span><span class=k>AND</span><span class=w> </span><span class=k>timestamp</span><span class=w> </span><span class=k>BETWEEN</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;1 week&#39;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;1 day&#39;</span>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=w>    </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>agent_id</span>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=p>)</span>
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a><span class=k>SELECT</span><span class=w> </span>
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-19-22><a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a><span class=w>    </span><span class=n>cm</span><span class=p>.</span><span class=n>current_avg</span><span class=p>,</span>
</span><span id=__span-19-23><a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a><span class=w>    </span><span class=n>hm</span><span class=p>.</span><span class=n>historical_avg</span><span class=p>,</span>
</span><span id=__span-19-24><a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a><span class=w>    </span><span class=p>((</span><span class=n>cm</span><span class=p>.</span><span class=n>current_avg</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>hm</span><span class=p>.</span><span class=n>historical_avg</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>hm</span><span class=p>.</span><span class=n>historical_avg</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>100</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>percent_change</span>
</span><span id=__span-19-25><a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a><span class=k>FROM</span><span class=w> </span><span class=n>agents</span><span class=w> </span><span class=n>a</span>
</span><span id=__span-19-26><a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a><span class=k>JOIN</span><span class=w> </span><span class=n>current_metrics</span><span class=w> </span><span class=n>cm</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cm</span><span class=p>.</span><span class=n>agent_id</span>
</span><span id=__span-19-27><a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a><span class=k>JOIN</span><span class=w> </span><span class=n>historical_metrics</span><span class=w> </span><span class=n>hm</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>hm</span><span class=p>.</span><span class=n>agent_id</span>
</span><span id=__span-19-28><a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a><span class=k>WHERE</span><span class=w> </span><span class=k>ABS</span><span class=p>((</span><span class=n>cm</span><span class=p>.</span><span class=n>current_avg</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>hm</span><span class=p>.</span><span class=n>historical_avg</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>hm</span><span class=p>.</span><span class=n>historical_avg</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>1</span><span class=p>;</span>
</span></code></pre></div> <h2 id=monitoring-dashboards-and-tools>Monitoring Dashboards and Tools<a class=headerlink href=#monitoring-dashboards-and-tools title="Permanent link">&para;</a></h2> <h3 id=built-in-monitoring-endpoints>Built-in Monitoring Endpoints<a class=headerlink href=#built-in-monitoring-endpoints title="Permanent link">&para;</a></h3> <ol> <li><strong>System Status Dashboard</strong></li> <li>Real-time agent status</li> <li>Active job count</li> <li>System resource usage</li> <li> <p>Recent errors</p> </li> <li> <p><strong>Job Monitoring Dashboard</strong></p> </li> <li>Job queue status</li> <li>Job progress tracking</li> <li>Success/failure rates</li> <li> <p>Performance trends</p> </li> <li> <p><strong>Agent Performance Dashboard</strong></p> </li> <li>Agent availability</li> <li>Device utilization</li> <li>Temperature monitoring</li> <li>Hash rate tracking</li> </ol> <h3 id=external-monitoring-integration>External Monitoring Integration<a class=headerlink href=#external-monitoring-integration title="Permanent link">&para;</a></h3> <p>The system can be integrated with external monitoring tools:</p> <ol> <li><strong>Prometheus Integration</strong></li> <li>Export metrics via <code>/metrics</code> endpoint (if implemented)</li> <li>Custom metric exporters</li> <li> <p>Alert manager integration</p> </li> <li> <p><strong>Grafana Dashboards</strong></p> </li> <li>PostgreSQL data source</li> <li>Custom dashboard templates</li> <li> <p>Alert visualization</p> </li> <li> <p><strong>Log Aggregation</strong></p> </li> <li>ELK Stack (Elasticsearch, Logstash, Kibana)</li> <li>Fluentd/Fluent Bit</li> <li>Centralized log analysis</li> </ol> <h3 id=monitoring-best-practices>Monitoring Best Practices<a class=headerlink href=#monitoring-best-practices title="Permanent link">&para;</a></h3> <ol> <li><strong>Regular Health Checks</strong></li> <li>Automated health check every 30 seconds</li> <li>Alert on 3 consecutive failures</li> <li> <p>Include dependency checks</p> </li> <li> <p><strong>Capacity Planning</strong></p> </li> <li>Monitor growth trends</li> <li>Plan for peak usage</li> <li> <p>Scale resources proactively</p> </li> <li> <p><strong>Performance Optimization</strong></p> </li> <li>Regular benchmark updates</li> <li>Query optimization based on metrics</li> <li> <p>Resource allocation tuning</p> </li> <li> <p><strong>Security Monitoring</strong></p> </li> <li>Audit log analysis</li> <li>Anomaly detection</li> <li>Access pattern monitoring</li> </ol> <h3 id=troubleshooting-guide>Troubleshooting Guide<a class=headerlink href=#troubleshooting-guide title="Permanent link">&para;</a></h3> <p>Common issues and monitoring approaches:</p> <ol> <li><strong>High CPU Usage</strong></li> <li>Check active job count</li> <li>Verify agent task distribution</li> <li> <p>Monitor database query performance</p> </li> <li> <p><strong>Memory Leaks</strong></p> </li> <li>Track memory usage over time</li> <li>Identify growing processes</li> <li> <p>Check for unclosed connections</p> </li> <li> <p><strong>Slow Job Processing</strong></p> </li> <li>Verify agent benchmarks</li> <li>Check network latency</li> <li> <p>Monitor file I/O performance</p> </li> <li> <p><strong>Database Performance</strong></p> </li> <li>Analyze slow queries</li> <li>Check index usage</li> <li>Monitor connection pool</li> </ol> <h2 id=maintenance-and-cleanup>Maintenance and Cleanup<a class=headerlink href=#maintenance-and-cleanup title="Permanent link">&para;</a></h2> <h3 id=automated-cleanup-services>Automated Cleanup Services<a class=headerlink href=#automated-cleanup-services title="Permanent link">&para;</a></h3> <p>The system includes several cleanup services:</p> <ol> <li><strong>Metrics Cleanup Service</strong></li> <li>Aggregates real-time metrics to daily/weekly</li> <li>Removes old metrics based on retention policy</li> <li> <p>Runs automatically on schedule</p> </li> <li> <p><strong>Agent Cleanup Service</strong></p> </li> <li>Marks stale agents as inactive</li> <li>Cleans up orphaned resources</li> <li> <p>Maintains agent health status</p> </li> <li> <p><strong>Job Cleanup Service</strong></p> </li> <li>Archives completed jobs</li> <li>Removes temporary files</li> <li>Updates job statistics</li> </ol> <h3 id=manual-maintenance-tasks>Manual Maintenance Tasks<a class=headerlink href=#manual-maintenance-tasks title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1># Force cleanup of old metrics</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>https://localhost:31337/api/admin/force-cleanup
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=c1># Vacuum database</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>krakenhashes_postgres_1<span class=w> </span>psql<span class=w> </span>-U<span class=w> </span>postgres<span class=w> </span>-d<span class=w> </span>krakenhashes<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;VACUUM ANALYZE;&quot;</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=c1># Check database bloat</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>krakenhashes_postgres_1<span class=w> </span>psql<span class=w> </span>-U<span class=w> </span>postgres<span class=w> </span>-d<span class=w> </span>krakenhashes<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a><span class=s2>SELECT </span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=s2>    schemaname,</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=s2>    tablename,</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=s2>    pg_size_pretty(pg_total_relation_size(schemaname||&#39;.&#39;||tablename)) AS size</span>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a><span class=s2>FROM pg_tables</span>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a><span class=s2>WHERE schemaname = &#39;public&#39;</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a><span class=s2>ORDER BY pg_total_relation_size(schemaname||&#39;.&#39;||tablename) DESC</span>
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a><span class=s2>LIMIT 10;&quot;</span>
</span></code></pre></div> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2> <p>Effective monitoring is crucial for maintaining a healthy KrakenHashes deployment. Regular monitoring of system health, job performance, and agent metrics ensures optimal operation and early detection of issues. Implement automated alerting for critical metrics and maintain historical data for trend analysis and capacity planning.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 27, 2025 16:33:54 UTC"><span class=timeago datetime=2025-10-27T16:33:54+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 27, 2025 16:33:54 UTC">2025-10-27</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 1, 2025 19:47:46 UTC"><span class=timeago datetime=2025-08-01T19:47:46+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 1, 2025 19:47:46 UTC">2025-08-01</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/ZerkerEOD/krakenhashes target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://discord.gg/taafA9cSFV target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "navigation.top", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "header.autohide", "content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.e71a0d61.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> <script src=../../../javascripts/extra.js></script> </body> </html>